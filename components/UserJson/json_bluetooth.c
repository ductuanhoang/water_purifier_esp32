/**
 * @file Json_bluetooth.c
 * @author your name (you@domain.com)
 * @brief
 * @version 0.1
 * @date 2022-03-15
 *
 * @copyright Copyright (c) 2022
 *
 */

/***********************************************************************************************************************
* Pragma directive
***********************************************************************************************************************/

/***********************************************************************************************************************
* Includes <System Includes>
***********************************************************************************************************************/
#include "json_bluetooth.h"
#include "cJSON.h"
#include "esp_log.h"
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"

/***********************************************************************************************************************
* Macro definitions
***********************************************************************************************************************/

/***********************************************************************************************************************
* Typedef definitions
***********************************************************************************************************************/

/***********************************************************************************************************************
* Private global variables and functions
***********************************************************************************************************************/

/***********************************************************************************************************************
* Exported global variables and functions (to be accessed by other files)
***********************************************************************************************************************/

/***********************************************************************************************************************
* Imported global variables and functions (from other files)
***********************************************************************************************************************/

/**
 * @brief 
 * 
 * @param token 
 * @param message_packet 
 * @Note: {"token":"1360","config":true,"clientid":"njm4otc3ntu2_00505024001_d8b505bd-f2be-4a6f-9503-bb9f49701fb2"}
 */
void json_bluetooth_packet(char *message_packet, const char *token, bool state, const char *clientid)
{
    cJSON *root = NULL;
    cJSON *subroot = NULL;
    root = cJSON_CreateObject();
    // subroot = cJSON_AddObjectToObject(root, "currentSensorStateData");
    cJSON_AddStringToObject(root, "token", token);
    cJSON_AddBoolToObject(root, "config", state);
    cJSON_AddStringToObject(root, "clientid", clientid);

    // APP_LOGD("message = %s", cJSON_PrintUnformatted(root));

    sprintf(message_packet, "%s", cJSON_PrintUnformatted(root));
    cJSON_free(subroot);
    cJSON_free(root);
}
/***********************************************************************************************************************
* static functions
***********************************************************************************************************************/

/***********************************************************************************************************************
* End of file
***********************************************************************************************************************/

